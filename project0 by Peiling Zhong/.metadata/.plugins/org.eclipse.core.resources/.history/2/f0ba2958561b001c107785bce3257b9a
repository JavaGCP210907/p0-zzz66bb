package com.ecommerce.models;


import java.util.List;
import java.util.Scanner;

import org.apache.logging.log4j.LogManager;
import org.apache.logging.log4j.Logger;

import com.ecommerce.dao.BrandDao;
import com.ecommerce.dao.ProductDao;

public class Menu {
	
	public void displayMenu() {
		
		boolean displayValue = true;
		ProductDao pdao = new ProductDao();
		BrandDao bdao = new BrandDao();
		
		Logger log = LogManager.getLogger(Menu.class);
		
		
		System.out.println("*************************************************");
		System.out.println(" Welcome to E-Commerce Product Management System ");
		System.out.println("*************************************************");
		
		Scanner scan = new Scanner(System.in);
		
		while(displayValue) {
			
			System.out.println("--------------------------");
			System.out.println(" Please Choose An Option: ");
			System.out.println("--------------------------");
			
			System.out.println("brands -> Show all brands.");
			System.out.println("products -> Show all products.");
			System.out.println("productByBrand -> Show product by inputting the brand of the product.");
			System.out.println("addProduct -> Add a product");
			System.out.println("updateProductPrice -> Change the product price.");
			System.out.println("deleteProduct -> Delete a product");
			System.out.println("exit -> Exit system!");
			
			String input = scan.nextLine();
			
			switch(input) {
			
            case "brands": { 
			 	
				List<Brand> brands = bdao.getBrands();
				
				for(Brand b : brands) {
					System.out.println(b);
				}
				
				break;
				
			}
			
			case "products": { 
				
				List<Product> products = pdao.getProducts();
				
				for(Product p : products) {
					System.out.println(p);
				}
				
				break;
				
			}
			
			case "productByBrand":{
				
				System.out.println("Enter Brand Name to Search: ");
				
				String brandInput = scan.nextLine();
				
				List<Product> products = pdao.getProductsByBrand(brandInput.toLowerCase());
				
				for(Product p : products) {
					System.out.println(p);
				}
				
				break;
				
			}
			
			case "addProduct":{
				
				System.out.println("Enter Product Name:");
				String product_name = scan.nextLine();
				
				System.out.println("Enter Product Detail:");
				String detail = scan.nextLine();
				
				System.out.println("Enter Product Price:");
				double price = scan.nextDouble();
				
				System.out.println("Enter Product Brand Id:   (tip: apple = 1 | hp = 2)");
				int brand_id = scan.nextInt();
				
				
			
				Product p = new Product(product_name, price, detail, brand_id);
				
				pdao.addProduct(p);
				
				log.info("Product " + product_name + " was added to database.");
			
				break;
			}
			
			
			case "updateProductPrice":{
				
				System.out.println("Enter Product Name to Change:");
				String product_name = scan.nextLine();
				
				System.out.println("Enter Product Price:");
				double price = scan.nextDouble();
				
				pdao.updateProductPrice(product_name, price);
				
				log.info("Product " + product_name + " price was changed.");
				
				break;
				
			}
			
			case "deleteProduct":{
				
				System.out.println("Enter Product Name to Delete:");
				String product_name = scan.nextLine();
				
				pdao.deleteProduct(product_name);
				
				log.warn("Product " + product_name + " was deleted.");
				
				break;
				
			}
			
			case "exit":{
				displayValue = false;
				System.out.println("See you again!");
				break;
				
			}
			
			default:{
				System.out.println("Please try again!");
				break;
			}
			
			}
			
		}
		
		System.out.println("Thank you for using the E-Commerce Product Management System!");
		scan.close();
		
		
	}
}
